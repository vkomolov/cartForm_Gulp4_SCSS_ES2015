!function i(o,c,s){function l(t,e){if(!c[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var a=c[t]={exports:{}};o[t][0].call(a.exports,function(e){return l(o[t][1][e]||e)},a,a.exports,i,o,c,s)}return c[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.Sku=function(){function r(e){if(o(this,r),!Object.keys(e).length)throw new Error("no data in the given obj"+e.toString());for(var t in e)this[t]=e[t]}return a(r,[{key:"getAllProps",value:function(){return Object.keys(this)}},{key:"initProperty",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(e in this)return t&&(this[e]=t),this[e];throw new Error("no such property found")}},{key:"getSum",value:function(){return(Math.round(this.price*this.itemQnty*100)/100).toFixed(2)}}]),r}(),r.Order=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;o(this,i),this.skuArr=e,this.tax=t,this.shipping=r,this.payer=n,this.recipient=a,this.orderDate=new Date}return a(i,[{key:"getSubtotalSum",value:function(){var t=0;if(this.skuArr.forEach(function(e){t+=+e.getSum()}),t)return Math.round(100*t)/100;throw new Error("Something is wrong with price or qnty of sku")}},{key:"getTax",value:function(){var e=this.getSubtotalSum();return Math.round(e/100*this.tax*100)/100}},{key:"getShipping",value:function(){var e=this.getSubtotalSum();return Math.round(e/100*this.shipping*100)/100}},{key:"getTotalSum",value:function(){var e=this.getSubtotalSum()+this.getTax()+this.getShipping();return Math.round(100*e)/100}},{key:"initProperty",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(e in this)return t&&(this[e]=t),this[e];throw new Error("no such property found")}}]),i}()},{}],2:[function(i,e,t){"use strict";window.addEventListener("DOMContentLoaded",function(){var e=i("./partial/initialData"),t=i("./partial/cssVars"),r=i("./partial/initForm"),n=function(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){var t,r,n;t=a,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n})}return a}({},t,{order:{},tax:20,shippingCost:30,stage:0,chosenArr:e.chosenArr,areaArr:e.areaArr,init:i("./partial/funcCollection"),inputNamesObj:i("./partial/inputsData"),regExpObj:i("./partial/regExpData"),inputValues:{}});if(!(n.init.checkInStorage(n.storageChosen,n.chosenArr)&&n.init.checkInStorage(n.storageArea,n.areaArr)&&document.forms[n.formName]))throw new Error("form #'order-form' not found or localStorage init error");if(n.form=document.getElementById(n.formName),n.headerCartQnty=document.getElementById(n.cartQntyName),n.stageWrapper=document.getElementById(n.stageWrapperName),n.localStore=JSON.parse(localStorage.getItem(n.storageChosen)),!n.headerCartQnty)throw new Error("no id ".concat(n.cartQntyName," found"));n.headerCartQnty.textContent=n.localStore.data.length;var a=[document.querySelector(".".concat(n.leftBarName)),document.querySelector(".".concat(n.rightBarName))];n.init.equalHeights(a),r(n)})},{"./partial/cssVars":6,"./partial/funcCollection":8,"./partial/initForm":9,"./partial/initialData":10,"./partial/inputsData":11,"./partial/regExpData":12}],3:[function(e,t,r){"use strict";t.exports=function(e){var t=e.form,r=e.order,n=(document.querySelector(".".concat(e.leftBarName)),document.querySelector(".".concat(e.rightBarName))),a=document.querySelector(".".concat(e.thankU)),i=document.getElementById(e.orderNoSpan),o=document.getElementById(e.payerEmailSpan),c=document.getElementById(e.orderDate);t.remove(),n.classList.add("ready"),a.classList.add("active"),i.textContent=r.orderNo,c.textContent=r.orderDate.toDateString(),o.textContent=r.payer["billing-email"]}},{}],4:[function(e,t,r){"use strict";var l=e("./buildThanks");t.exports=function(e){var t=e.stage,r=e.active,n=[],a=e.stageWrapper.querySelectorAll('span[data-type="stage"]'),i=e.form.querySelectorAll(".".concat(e.formBlock));for(var o in e.init.removeAlerts(e),e.init.unmarkInputs(e),e.inputNamesObj)if(e.inputNamesObj[o].stage<=t&&-1!==e.inputNamesObj[o].stage){var c=e.form.elements[o];if(!c)throw new Error("no DOM input by name "+o+"found");if(!c.value)if("recipient-country"===c.name||"billing-country"===c.name){var s=e.form.querySelector("span[data-type=".concat(c.name,"]")).parentElement;s.classList.add("marked"),n.push(s.parentElement)}else c.classList.add("marked"),n.push(c.parentElement)}if(n.length)e.init.insertAlarm(n[0],e);else if(t<a.length-1)e.stage=++t,e.init.updateStage(t,[a,i],r);else{e.init.getAllInputs(e),e.init.processOrder(e);e.order.orderNo="12345_ab_bl11",l(e)}}},{"./buildThanks":3}],5:[function(e,t,r){"use strict";t.exports=function(y){var n=y.order,v=document.getElementById(y.cartList),e=document.querySelector(".".concat(y.cartInfoTotal));if(n.skuArr.forEach(function(e){var t=e.initProperty("photoUrl"),r=e.initProperty("itemName"),n=e.getSum(),a=e.initProperty("itemDetail"),i=e.initProperty("itemQnty"),o=document.createElement("div");o.classList.add(y.cartItem);var c=document.createElement("div");c.setAttribute("class",y.imageContainer),o.appendChild(c);var s=document.createElement("img");s.setAttribute("src",t),s.setAttribute("alt","item image"),c.appendChild(s);var l=document.createElement("div");l.classList.add(y.cartItemInfo),o.appendChild(l);var u=document.createElement("div");u.setAttribute("class","flex-box between"),l.appendChild(u);var p=document.createElement("span");p.setAttribute("data-cart","itemName"),p.textContent=r,u.appendChild(p);var m=document.createElement("span");m.setAttribute("data-cart","itemSum"),m.textContent="$"+n,u.appendChild(m);var d=document.createElement("div");d.classList.add(y.cartItemSpec),l.appendChild(d);var f=document.createElement("span");f.setAttribute("data-cart","itemDetail"),f.textContent=a,d.appendChild(f);var g=document.createElement("span");g.textContent="Quantity:",d.appendChild(g);var h=document.createElement("span");h.setAttribute("data-cart","itemQnty"),h.textContent=i,g.appendChild(h),v.appendChild(o),v.appendChild(document.createElement("hr"))}),!e)throw new Error("class ".concat(y.cartInfoTotal," not found in DOM"));e.querySelectorAll("span").forEach(function(t){var e=t.dataset.cart;if(e){var r={subTotal:function(){t.textContent="$"+n.getSubtotalSum().toFixed(2)},shippingCost:function(){var e=n.getShipping();t.textContent=e?"$"+e.toFixed(2):"free"},taxCost:function(){t.textContent="$"+n.getTax().toFixed(2)},totalPrice:function(){t.textContent="$"+n.getTotalSum().toFixed(2)}};e in r&&r[e]()}})}},{}],6:[function(e,t,r){"use strict";t.exports={formName:"order-form",storageChosen:"chosen",storageArea:"area",leftBarName:"person-info",rightBarName:"cart-info",cartQntyName:"cart__qnty",cartList:"cart-list",cartInfoTotal:"cart-info__total",cartInfoTotalRow:"cart-info__total__row",cartItem:"cart-item",imageContainer:"image-container goods",cartItemInfo:"cart-item__info",cartItemSpec:"cart-item__spec",formBlock:"form__block",stageWrapperName:"form__stage-wrapper",selectionBlock:"selection__block",optionWrapper:"option-wrapper",alertMessage:"alert-message",marked:"marked",active:"active",bold:"bold",thankU:"thankU-wrapper",orderNoSpan:"order-number",payerEmailSpan:"payer-email",orderDate:"order-date"}},{}],7:[function(t,e,r){"use strict";e.exports=function(l){var u=t("./checkForNext"),e=l.form,p=l.active,m=l.bold;function r(e,t){e.parentElement.classList.toggle(t)}e.addEventListener("keydown",function(e){var t=e.target;13!==e.keyCode&&27!==e.keyCode||t.blur()},!0),e.addEventListener("focus",function(e){var t=e.target;"recipient-country"!==t.name&&"billing-country"!==t.name&&r(t,p)},!0),e.addEventListener("blur",function(e){var t=e.target;"recipient-country"!==t.name&&"billing-country"!==t.name&&r(t,p)},!0),e.addEventListener("click",function(e){var t=e.target;if("continue"===t.closest("div").dataset.type&&u(l),t.closest(".".concat(l.selectionBlock))){var r=t.closest(".".concat(l.selectionBlock)),n=r.parentElement.querySelector("input"),a=n.parentElement;n.value="",function(e,t){var r=e.querySelector(".".concat(l.optionWrapper));r&&r.parentElement.removeChild(r);(r=document.createElement("div")).classList.add(l.optionWrapper);for(var n=0;n<t.length;n++){var a=document.createElement("span");a.setAttribute("data-type","option"),a.textContent=t[n],r.appendChild(a)}e.insertBefore(r,e.firstChild)}(a,l.areaArr),a.classList.add(p),r.classList.add(p),n.focus()}if("option"===t.dataset.type){var i=t.parentElement.parentElement,o=i.querySelector("input"),c=i.parentElement,s=c.querySelector("span[data-type=".concat(o.name));o.value="",o.value=t.textContent,""!==o.value&&(s.textContent=o.value,s.classList.add(m),setTimeout(function(){i.classList.remove(p),c.querySelector(".".concat(l.selectionBlock)).classList.remove(p)},200))}})}},{"./checkForNext":4}],8:[function(e,t,r){"use strict";var n=e("../classes"),a=n.Sku,i=n.Order;function o(e,t,r){var n=document.createElement("span");n.textContent=r,e.insertBefore(n,e.firstChild),n.setAttribute("class",t)}r.checkInStorage=function(e,t){var r,n,a,i,o=localStorage.getItem(e);if(o){r=JSON.parse(o);var c=new Date(r.creationDate);if((new Date-c)/1e3/60/60/24<1)return!0}return n=e,i={},(a=t).length&&(i={data:a,creationDate:new Date},localStorage.setItem(n,JSON.stringify(i))),!!localStorage.getItem(e)},r.equalHeights=function(e){for(var t=0,r=0;r<e.length;r++)e[r].offsetHeight>=t&&(t=e[r].offsetHeight);e.forEach(function(e){return e.style.height=t+"px"})},r.createSku=function(e){return e.map(function(e){return new a(e)})},r.makeOrder=function(e,t,r){return new i(e,t,r)},r.updateStage=function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0;if(!e.length)throw new Error("the array of nodeLists given in arguments is empty");e.forEach(function(e){if(!e.length)throw new Error("the nodeList is empty");var t;t=n,e.forEach(function(e){e.classList.remove(t)}),e[r].classList.add(n)})},r.removeAlerts=function(e){var t=e.form,r=e.alertMessage,n=t.querySelectorAll(".".concat(r));n.length&&n.forEach(function(e){e.parentElement.removeChild(e)})},r.unmarkInputs=function(t){var e=t.form.querySelectorAll(".".concat(t.marked));e.length&&e.forEach(function(e){e.classList.remove(t.marked)})},r.insertAlarm=function(e,t){var r,n,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"empty",i="please enter ";if(e.classList.contains(t.selectionBlock))r=(n=e.parentElement.querySelector("input")).name;else{if(!e.querySelector("input"))throw new Error("no input found");r=(n=e.querySelector("input")).name,t.form.elements[r].style.caretColor="red"}n.focus(),"empty"===a?(i+=r.replace(/-/g," "),o(e,t.alertMessage,i)):"error"===a?(i="format: ",i+=t.inputNamesObj[r].error,o(e,t.alertMessage,i)):o(e,t.alertMessage,a)},r.getAllInputs=function(e){var t,r,n=e.inputNamesObj,a=e.inputValues;for(var i in n)if("card-date"===i){var o=e.form.elements[i].value,c=o.slice(-2),s=o.slice(0,2);a[i]=(void 0,t=+s-1,r=+c+2e3,new Date(r,t))}else a[i]=e.form.elements[i].value},r.processOrder=function(e){var t=e.inputValues,r=function(e){var t=[];for(var r in e)e[r]||r.match(/optional/)||t.push(r);return t}(t);if(r.length)throw new Error("found empty inputs: ".concat(r.join(", ")));!function(e,t,r){var n={},a={};for(var i in e)i.match(t)?n[i]=e[i]:a[i]=e[i];r.initProperty("payer",n),r.initProperty("recipient",a)}(t,/billing/,e.order)}},{"../classes":1}],9:[function(l,e,t){"use strict";e.exports=function(e){var t=l("./createCartDom"),r=l("./formListen"),n=e.stage,a=e.stageWrapper.querySelectorAll('span[data-type="stage"]'),i=e.form.querySelectorAll(".".concat(e.formBlock)),o=e.init.createSku(e.chosenArr),c=e.tax,s=e.shippingCost;o.length&&(e.order=e.init.makeOrder(o,c,s)),t({order:e.order,cartList:e.cartList,cartInfoTotal:e.cartInfoTotal,cartItem:e.cartItem,imageContainer:e.imageContainer,cartItemInfo:e.cartItemInfo,cartItemSpec:e.cartItemSpec}),e.init.updateStage(n,[a,i],e.active),r(e)}},{"./createCartDom":5,"./formListen":7}],10:[function(e,t,r){"use strict";r.chosenArr=[{itemName:"The Chelsea Boot",itemId:"18035",price:"235",itemDetail:"Black",itemQnty:1,photoUrl:"./img/boots.png"},{itemName:"The Twill Snap Backpack",itemId:"22016",price:"65",itemDetail:"Reverse Denim + Brown leather",itemQnty:1,photoUrl:"./img/backpack.png"},{itemName:"The Twill Zip Tote",itemId:"38049",price:"48",itemDetail:"Reverse Denim + Black leather",itemQnty:1,photoUrl:"./img/bag.png"}],r.areaArr=["Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore"]},{}],11:[function(e,t,r){"use strict";t.exports={"recipient-full-name":{error:"Jonathan Smith",type:"spacedString",stage:0},"recipient-phone-number":{error:"+7(987)123-77-88",type:"phone",stage:0},"recipient-street-address":{error:"Pushkina",type:"string",stage:0},optional:{error:"format: All except: '+', '=', '*'",type:"combi",stage:-1},"recipient-city":{error:"Kazan",type:"string",stage:0},"recipient-country":{error:"Russia",type:"stringMaySpace",stage:0},"recipient-zip":{error:"420015",type:"zip",stage:0},"billing-full-name":{error:"Jonathan Smith",type:"spacedString",stage:2},"billing-email":{error:"j.smith@gmail.com",type:"email",stage:1},"billing-street-address":{error:"Pushkina",type:"string",stage:1},"billing-optional":{error:"format: All except: '+', '=', '*'",type:"combi",stage:-1},"billing-city":{error:"Kazan",type:"string",stage:1},"billing-country":{error:"Russia",type:"stringMaySpace",stage:1},"billing-zip":{error:"420015",type:"zip",stage:1},"card-name":{error:"Jonathan Smith",type:"spacedString",stage:2},"card-number":{error:"3333 7777 8888 3333",type:"cardNumber",stage:2},"card-date":{error:"MMYY: 0518",type:"cardDate",stage:2},"card-code":{error:"0458",type:"cardCode",stage:2}}},{}],12:[function(e,t,r){"use strict";t.exports={phone:/^[\+]?[0-9]{0,1}[(]?[0-9]{0,3}[)]?[0-9]{0,3}[-]?[0-9]{0,2}[-]?[0-9]{0,2}$/,string:/^[a-z]{1,30}$/i,stringMaySpace:/^([a-z]{1,15}\s?)([a-z]{0,15}\s?)[a-z]{0,15}$/i,spacedString:/^([a-z]{1,15}\s?)[a-z]{0,15}$/i,combi:/^[^\+\*=]+$/i,zip:/^[0-9]{1,6}$/i,email:/^[a-z0-9]{1,15}[\@]?[a-z0-9]{0,15}[\.]?[a-z]{0,5}$/i,cardNumber:/^[0-9]{1,4}\s?[0-9]{0,4}\s?[0-9]{0,4}\s?[0-9]{0,4}$/i,cardDate:/^[0-9]{1,4}$/i,cardCode:/^[0-9]{1,4}$/i}},{}]},{},[2]);